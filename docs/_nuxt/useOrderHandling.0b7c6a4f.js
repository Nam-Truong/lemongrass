import{d as V,_ as z,f as p,k as $,l as q,C as M,F as B,A as E,s as l,q as a,D as K,m,t as g,v as D,B as A,E as H,x as X,y as Z,r as T,c as L}from"./entry.8165f6e6.js";const W=V({name:"CategorySelection",props:{categories:{type:Array,required:!0}},emits:["category-selected"],methods:{selectCategory(e){this.$emit("category-selected",e)}}});function ee(e,d,i,k,b,S){const h=p("v-card-title"),x=p("v-card"),y=p("v-col");return $(!0),q(B,null,M(e.categories,(r,n)=>($(),E(y,{key:n,cols:"12",sm:"6",md:"4",lg:"3"},{default:l(()=>[a(x,{style:K(`border-color: ${r.color};`),class:"ma-2 pa-3 category-card",onClick:o=>e.selectCategory(r)},{default:l(()=>[a(h,{class:"text-center text-responsive item-title"},{default:l(()=>[m("strong",null,g(r.name),1)]),_:2},1024)]),_:2},1032,["style","onClick"])]),_:2},1024))),128)}const ge=z(W,[["render",ee],["__scopeId","data-v-d40a4018"]]),te=V({name:"ItemSelection",props:{selectedCategory:{type:Object,required:!0}},emits:["item-selected"],methods:{select(e){this.$emit("item-selected",e)}}});function ne(e,d,i,k,b,S){const h=p("v-card-text"),x=p("v-card-subtitle"),y=p("v-card"),r=p("v-col");return $(!0),q(B,null,M(e.selectedCategory.items,n=>($(),E(r,{key:n.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:l(()=>[a(y,{class:"ma-2 pa-3 item-card",onClick:o=>e.select(n)},{default:l(()=>[a(h,{class:"text-center text-responsive item-title flex-grow-1"},{default:l(()=>[m("strong",null,g(n.name),1)]),_:2},1024),a(h,{class:"flex-grow-1"}),a(x,{class:"price-info text-center"},{default:l(()=>[D(" $"+g(n.price),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128)}const ye=z(te,[["render",ne],["__scopeId","data-v-34286990"]]),oe=V({name:"DetailsSelection",props:{selectedFoodItem:{type:Object,required:!0}},emits:["protein-selected","flavour-selected"],methods:{selectProtein(e){this.$emit("protein-selected",e)},selectFlavour(e){this.$emit("flavour-selected",e)}}});function ae(e,d,i,k,b,S){const h=p("v-card-title"),x=p("v-card-text"),y=p("v-card"),r=p("v-col");return $(),q(B,null,[e.selectedFoodItem.proteinChoices?($(!0),q(B,{key:0},M(e.selectedFoodItem.proteinChoices,n=>($(),E(r,{cols:"12",sm:"6",md:"4",lg:"3",key:n.name},{default:l(()=>[a(y,{onClick:o=>e.selectProtein(n),class:"ma-2 pa-3 item-card protein-card"},{default:l(()=>[a(h,{class:"text-center item-title flex-grow-1"},{default:l(()=>[D(g(n.name),1)]),_:2},1024),a(x,{class:"flex-grow-1"}),a(x,{class:"price-info text-center"},{default:l(()=>[D(" $"+g(n.price),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128)):A("",!0),e.selectedFoodItem.flavourChoices?($(!0),q(B,{key:1},M(e.selectedFoodItem.flavourChoices,n=>($(),E(r,{cols:"12",sm:"6",md:"4",lg:"3",key:n.name},{default:l(()=>[a(y,{onClick:o=>e.selectFlavour(n),class:"ma-2 pa-3 item-card flavour-card"},{default:l(()=>[a(h,{class:"text-center item-title"},{default:l(()=>[D(g(n.name),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128)):A("",!0)],64)}const $e=z(oe,[["render",ae],["__scopeId","data-v-6dc3e749"]]),le=V({name:"OrderSummary",data(){return{localEditingNote:this.editingNote?this.editingNote.split(", ").filter(Boolean):[]}},computed:{displayNote(){return this.localEditingNote.join(", ")}},watch:{editingNote(e){this.localEditingNote=e}},props:{selectedItems:{type:Array,required:!0},totalBill:{type:Number,required:!0},editingItem:{type:Object,default:null},editingNote:{type:String},popularNotes:{type:Array,default:()=>[]},filteredNotes:{type:Array,default:()=>[]}},emits:["update-note","increase-quantity","decrease-quantity","start-editing","save-editing","cancel-editing"],methods:{updateNote(e){this.$emit("update-note",e.join(", "))},increaseQuantity(e){this.$emit("increase-quantity",e)},decreaseQuantity(e){this.$emit("decrease-quantity",e)},startEditing(e){this.$emit("start-editing",e)},saveEditingItem(){this.$emit("save-editing",this.displayNote)},cancelEditingItem(){this.$emit("cancel-editing")}}});const U=e=>(X("data-v-257cc94f"),e=e(),Z(),e),ie=U(()=>m("strong",null,"Subtotal:",-1)),re=U(()=>m("strong",null,"GST:",-1)),se=U(()=>m("strong",null,"Total price includes GST:",-1));function ue(e,d,i,k,b,S){const h=p("v-card-title"),x=p("v-col"),y=p("v-row"),r=p("v-btn"),n=p("v-card-text"),o=p("v-icon"),_=p("v-card-subtitle"),u=p("v-combobox"),F=p("v-card-actions"),v=p("v-divider"),N=p("v-list-item"),P=p("v-list");return $(),q(B,null,[a(h,{class:"order-title"},{default:l(()=>[D("Order Summary")]),_:1}),a(P,{style:{"max-height":"600px"}},{default:l(()=>[($(!0),q(B,null,M(e.selectedItems,t=>($(),E(N,{key:t.uid},{default:l(()=>[a(y,{class:"ma-2"},{default:l(()=>[a(x,{cols:"7"},{default:l(()=>[m("strong",null,g(t.name),1)]),_:2},1024),a(x,{cols:"2"},{default:l(()=>[m("strong",null,g(t.quantity),1)]),_:2},1024),a(x,{cols:"3",class:"text-right"},{default:l(()=>[m("strong",null,"$"+g(t.price),1)]),_:2},1024)]),_:2},1024),a(y,{class:"ma-2"},{default:l(()=>[a(r,{onClick:C=>e.increaseQuantity(t),size:"small",icon:"mdi-plus",variant:"text"},null,8,["onClick"]),a(r,{onClick:H(C=>e.decreaseQuantity(t.uid),["stop"]),size:"small",icon:"mdi-minus",variant:"text"},null,8,["onClick"]),e.editingItem!==t?($(),E(r,{key:0,onClick:H(C=>e.startEditing(t.uid),["stop"]),size:"small",icon:"mdi-pencil",variant:"text"},null,8,["onClick"])):A("",!0)]),_:2},1024),a(y,{class:"ma-2"},{default:l(()=>[a(x,{cols:"12"},{default:l(()=>{var C,w,s,f;return[t.selectedProtein||((C=e.editingItem)==null?void 0:C.uid)===t.uid?($(),E(n,{key:0,style:{"min-height":"0"},class:"d-flex flex-no-wrap justify-space-between"},{default:l(()=>{var c,O,Q,j,R,G,J,Y;return[m("p",null,g(((c=e.editingItem)==null?void 0:c.uid)===t.uid?(Q=(O=e.editingItem)==null?void 0:O.selectedProtein)==null?void 0:Q.name:(j=t==null?void 0:t.selectedProtein)==null?void 0:j.name),1),m("p",null," $"+g(((R=e.editingItem)==null?void 0:R.uid)===t.uid?(J=(G=e.editingItem)==null?void 0:G.selectedProtein)==null?void 0:J.price:(Y=t==null?void 0:t.selectedProtein)==null?void 0:Y.price),1)]}),_:2},1024)):A("",!0),t.selectedFlavour||((w=e.editingItem)==null?void 0:w.uid)===t.uid?($(),E(n,{key:1},{default:l(()=>{var c,O,Q,j;return[D(g(((c=e.editingItem)==null?void 0:c.uid)===t.uid?(Q=(O=e.editingItem)==null?void 0:O.selectedFlavour)==null?void 0:Q.name:(j=t==null?void 0:t.selectedFlavour)==null?void 0:j.name),1)]}),_:2},1024)):A("",!0),t.note||((s=e.editingItem)==null?void 0:s.uid)===t.uid?($(),E(_,{key:2},{default:l(()=>{var c;return[a(o,null,{default:l(()=>[D("mdi-note-outline")]),_:1}),D(" "+g(((c=e.editingItem)==null?void 0:c.uid)===t.uid?e.displayNote:t==null?void 0:t.note),1)]}),_:2},1024)):A("",!0),((f=e.editingItem)==null?void 0:f.uid)===t.uid?($(),E(F,{key:3},{default:l(()=>[a(u,{modelValue:e.localEditingNote,"onUpdate:modelValue":d[0]||(d[0]=c=>e.localEditingNote=c),items:e.filteredNotes,onInput:e.updateNote,label:"Note",multiple:"",chips:""},null,8,["modelValue","items","onInput"]),a(r,{onClick:e.saveEditingItem,size:"small",icon:"mdi-check",outlined:""},null,8,["onClick"]),a(r,{onClick:e.cancelEditingItem,size:"small",icon:"mdi-close",outlined:""},null,8,["onClick"])]),_:1})):A("",!0)]}),_:2},1024)]),_:2},1024),a(v)]),_:2},1024))),128))]),_:1}),a(n,{class:"d-flex flex-no-wrap justify-space-between"},{default:l(()=>[ie,m("strong",null,"$"+g(e.totalBill.toFixed(2)),1)]),_:1}),a(n,{class:"d-flex flex-no-wrap justify-space-between"},{default:l(()=>[re,m("strong",null,"$"+g((e.totalBill/11).toFixed(2)),1)]),_:1}),a(n,{class:"d-flex flex-no-wrap justify-space-between"},{default:l(()=>[se,m("strong",null,"$"+g(e.totalBill.toFixed(2)),1)]),_:1})],64)}const he=z(le,[["render",ue],["__scopeId","data-v-257cc94f"]]),ce=V({name:"SavedOrders",props:{orders:{type:Array,required:!0}}}),de=m("h2",null,"Saved Orders",-1),pe=m("br",null,null,-1),_e=m("br",null,null,-1),ve=m("hr",null,null,-1);function fe(e,d,i,k,b,S){const h=p("v-spacer"),x=p("v-expansion-panel-title"),y=p("v-expansion-panel-text"),r=p("v-expansion-panel"),n=p("v-expansion-panels");return $(),q("div",null,[de,pe,($(!0),q(B,null,M(e.orders,o=>($(),q("div",{key:o.id},[a(n,null,{default:l(()=>[a(r,null,{default:l(()=>[a(x,null,{default:l(()=>[m("h3",null,"Order ID: "+g(o.id),1),a(h),m("p",null,"Timestamp: "+g(o.timestamp),1),a(h),m("p",null,"Total: $"+g(o.total),1)]),_:2},1024),a(y,null,{default:l(()=>[($(!0),q(B,null,M(o.items,_=>($(),q("div",{key:_.name},[m("strong",null,"Name: "+g(_.name),1),m("p",null,"Quantity: "+g(_.quantity),1),m("p",null,"Protein: "+g(_.protein),1),m("p",null,"Flavour: "+g(_.flavour),1),m("p",null,"Note: "+g(_.note),1),_e]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024),ve]))),128))])}const Ce=z(ce,[["render",fe]]);function xe(e,d,i){const k=T(""),b=T(!1),S=L(()=>e.value.find(r=>r.name===k.value)),h=L(()=>{var r;return((r=S.value)==null?void 0:r.color)||"#FFFFFF"});return{selectedCategory:S,selectedCategoryColor:h,selectCategory:r=>{k.value=r.name,b.value=!0},goBack:()=>{i.value?(i.value=!1,d.value=null):(b.value=!1,k.value="")},isCategorySelected:b,selectedCategoryName:k}}function I(e,d,i,k){return{generateRandomId:()=>Math.floor(Math.random()*Date.now()),isSameItem:(n,o)=>{var _,u,F,v;return console.log("Comparing items:",n,o),!(!n||!o||n.id!==o.id||((_=n.selectedProtein)==null?void 0:_.name)!==((u=o.selectedProtein)==null?void 0:u.name)||((F=n.selectedFlavour)==null?void 0:F.name)!==((v=o.selectedFlavour)==null?void 0:v.name)||n.note!==o.note)},getCategoryItem:n=>{const _=e.value.reduce((u,F)=>[...u,...F.items],[]).find(u=>u.id===n)||null;return console.log("Found item:",_),_},updateTotalBill:()=>{k.value=d.value.reduce((n,o)=>{const _=e.value.reduce((u,F)=>F.items.find(N=>N.id===o.id)||u,null);return _&&(n+=_.price*o.quantity,o.selectedProtein&&(n+=o.selectedProtein.price*o.quantity)),n},0)},getCategoryname:(n,o)=>{const _=e.value.reduce((v,N)=>{const P=N.items.find(t=>t.id===n);return P||v},null);if(!_)return"";let u="";const F=d.value.find(v=>v.uid===o);if(F){const v=F.selectedProtein,N=F.selectedFlavour;u=`${_.name}`,v&&(u+=` - ${v.name}`),N&&(u+=` - ${N.name}`)}return u},getCategoryItemPrice:n=>{let o=0;const _=e.value.reduce((F,v)=>{const N=v.items.find(P=>P.id===n);return N||F},null);if(!_)return o;const u=d.value.find(F=>F.id===n);return u&&(o+=_.price*u.quantity,u.selectedProtein&&(o+=u.selectedProtein.price*u.quantity),u.selectedFlavour&&(o+=u.selectedFlavour.price*u.quantity)),i.value=o,o}}}function Fe(e,d,i,k,b,S,h,x){const y=T(!1),r=T(""),n=I(e,d,S,h),o=T(["no chilli","no onion","extra spicy","well done"]),_=L(()=>r.value===""?o.value:o.value.filter(s=>s.includes(r.value))),u=s=>{console.log("Increasing quantity for:",s);const f=d.value.find(c=>n.isSameItem(c,s));if(console.log("Matching existing item:",f),f)f.quantity++,console.log("no Matching existing item:");else{const c={uid:n.generateRandomId(),id:s.id,name:s.name,quantity:1,price:s.price,selectedProtein:s.selectedProtein||void 0,selectedFlavour:s.selectedFlavour||void 0,note:s.note||""};d.value.push(c),console.log("new added item:",c)}n.updateTotalBill(),!s.selectedProtein&&!s.selectedFlavour&&x()};return{increaseQuantity:u,decreaseQuantity:s=>{const f=d.value.find(c=>c.uid===s);f&&f.quantity>1?f.quantity--:d.value=d.value.filter(c=>c.uid!==s),n.updateTotalBill()},selectProtein:s=>{if(i.value){i.value.selectedProtein=s;const f=d.value.find(c=>i.value&&n.isSameItem(c,i.value));f&&(f.selectedProtein=s),!y.value&&!i.value.selectedFlavour&&u(i.value)}},selectFlavour:s=>{if(i.value){i.value.selectedFlavour=s;const f=d.value.find(c=>i.value&&n.isSameItem(c,i.value));f&&(f.selectedFlavour=s),!y.value&&!i.value.selectedProtein&&u({...i.value})}},startEditing:s=>{y.value=!0;const f=d.value.find(c=>c.uid===s);if(f){i.value={...f};const c=e.value.reduce((O,Q)=>{const j=Q.items.find(R=>R.id===f.id);return j||O},null);b.value=c,k.value=!0}},saveEditingItem:s=>{const f=d.value.find(c=>{var O;return c.uid===((O=i.value)==null?void 0:O.uid)});f&&i.value&&(f.selectedProtein=i.value.selectedProtein,f.selectedFlavour=i.value.selectedFlavour,f.note=s),i.value=null,r.value="",y.value=!1,n.updateTotalBill(),k.value=!1},cancelEditingItem:()=>{i.value=null,r.value="",k.value=!1},updateEditingNote:s=>{r.value=s},editingMode:y,editingNote:r,popularNotes:o,filteredNotes:_}}function Ne(e,d,i,k,b){const S=T(!1),h=T([]),x=T("Your Company Name"),y=T("Your ABN"),r=I(e,d,k,i),n=()=>{let v=`
<div class="receipt">
    <p>Supplier: ${x}</p>
    <p>ABN: ${y}</p>
    <p>Date: ${new Date().toLocaleDateString()}</p>
    <h4>Items:</h4>
    <table>
        <tr>
            <th>Name</th>
            <th>Quantity</th>
            <th>Total</th>
        </tr>`;d.value.forEach(C=>{v+=`
        <tr>
            <td>${C.name}</td>
            <td>${C.quantity}</td>
            <td>$${r.getCategoryItemPrice(C.id).toFixed(2)}</td>
        </tr>`});let N=i.value,P=i.value-.9*i.value;v+=`
    </table>
    <p>Total: $${N.toFixed(2)}</p>
    <p>GST: $${P.toFixed(2)}</p>
</div>`;const t=window.open("","_blank");t==null||t.document.write(`
    <head>
        <style>
            .receipt {
                font-family: 'Courier New', monospace;
                width: 300px;
            }
            table {
                width: 100%;
                border: none;
                
            }
            th, td {
                
                padding: 5px;
                text-align: right;
            }
            th {
                text-align: center;
            }
        </style>
    </head>
    <body>${v}</body>
`),t==null||t.document.close(),t==null||t.print()},o=()=>{if(d.value.length>0){const v=d.value.map(C=>{var w,s;return{name:C.name,quantity:C.quantity,protein:(w=C.selectedProtein)==null?void 0:w.name,flavour:(s=C.selectedFlavour)==null?void 0:s.name,note:C.note}}),N={id:r.generateRandomId(),timestamp:new Date,items:v,total:i.value};let P=localStorage.getItem("orders"),t=P?JSON.parse(P):[];t.push(N),localStorage.setItem("orders",JSON.stringify(t)),b.value=!0,setTimeout(()=>{b.value=!1},3e3),console.log("Order saved. Total orders: ",t.length)}else console.log("No items in the order to save.")},_=()=>{S.value=!0,u()},u=()=>{let v=localStorage.getItem("orders");h.value=v?JSON.parse(v):[]};return{showDialog:S,savedOrders:h,supplierName:x,supplierABN:y,printOrder:n,saveOrder:o,viewOrders:_,loadOrders:u,downloadOrders:()=>{let v=h.value.map(C=>`Order ID: ${C.id}
Timestamp: ${C.timestamp}
Total: ${C.total}
Items: ${C.items.map(w=>`Name: ${w.name}, Quantity: ${w.quantity}, Protein: ${w.protein}, Flavour: ${w.flavour}, Note: ${w.note}`).join(`
`)}

`).join(`
`),N=new Blob([v],{type:"text/plain"}),P=URL.createObjectURL(N),t=document.createElement("a");t.download="orders.txt",t.href=P,t.click()}}}export{Ce as _,ge as a,ye as b,$e as c,he as d,xe as e,Fe as f,Ne as g,I as u};
