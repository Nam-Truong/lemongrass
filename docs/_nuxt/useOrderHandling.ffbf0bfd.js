import{d as L,_ as R,f as _,k as v,l as w,C as M,F as D,A as O,s as l,q as i,D as Y,m as b,t as y,v as B,B as T,E as K,x as Z,y as W,r as V,c as z}from"./entry.ee494d90.js";const I=L({name:"CategorySelection",props:{categories:{type:Array,required:!0}},emits:["category-selected"],methods:{selectCategory(e){this.$emit("category-selected",e)}}});function ee(e,p,r,N,P,q){const F=_("v-card-title"),k=_("v-card"),C=_("v-col");return v(!0),w(D,null,M(e.categories,(u,n)=>(v(),O(C,{key:n,cols:"12",sm:"6",md:"4",lg:"3"},{default:l(()=>[i(k,{style:Y(`border-color: ${u.color};`),class:"ma-2 pa-3 category-card",onClick:o=>e.selectCategory(u)},{default:l(()=>[i(F,{class:"text-center text-responsive item-title"},{default:l(()=>[b("strong",null,y(u.name),1)]),_:2},1024)]),_:2},1032,["style","onClick"])]),_:2},1024))),128)}const ke=R(I,[["render",ee],["__scopeId","data-v-0c3f5cd9"]]),te=L({name:"ItemSelection",props:{selectedCategory:{type:Object,required:!0}},emits:["item-selected"],methods:{select(e){this.$emit("item-selected",e)}}});function ne(e,p,r,N,P,q){const F=_("v-card-text"),k=_("v-card-subtitle"),C=_("v-card"),u=_("v-col");return v(!0),w(D,null,M(e.selectedCategory.items,n=>(v(),O(u,{key:n.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:l(()=>[i(C,{class:"pa-1 item-card",onClick:o=>e.select(n)},{default:l(()=>[i(F,{class:"text-center text-responsive item-title flex-grow-1"},{default:l(()=>[b("strong",null,y(n.name),1)]),_:2},1024),i(k,{class:"price-info text-center"},{default:l(()=>[B(" $"+y(n.price),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128)}const Ce=R(te,[["render",ne],["__scopeId","data-v-3f72d7bf"]]),oe=L({name:"DetailsSelection",props:{selectedFoodItem:{type:Object,required:!0}},emits:["protein-selected","flavour-selected"],methods:{selectProtein(e){this.$emit("protein-selected",e)},selectFlavour(e){this.$emit("flavour-selected",e)}}});function ae(e,p,r,N,P,q){const F=_("v-card-title"),k=_("v-card-text"),C=_("v-card"),u=_("v-col");return v(),w(D,null,[e.selectedFoodItem.proteinChoices?(v(!0),w(D,{key:0},M(e.selectedFoodItem.proteinChoices,n=>(v(),O(u,{cols:"12",sm:"6",md:"4",lg:"3",key:n.name},{default:l(()=>[i(C,{onClick:o=>e.selectProtein(n),class:"ma-2 pa-3 item-card protein-card"},{default:l(()=>[i(F,{class:"text-center item-title flex-grow-1"},{default:l(()=>[B(y(n.name),1)]),_:2},1024),i(k,{class:"flex-grow-1"}),i(k,{class:"price-info text-center"},{default:l(()=>[B(" $"+y(n.price),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128)):T("",!0),e.selectedFoodItem.flavourChoices?(v(!0),w(D,{key:1},M(e.selectedFoodItem.flavourChoices,n=>(v(),O(u,{cols:"12",sm:"6",md:"4",lg:"3",key:n.name},{default:l(()=>[i(C,{onClick:o=>e.selectFlavour(n),class:"ma-2 pa-3 item-card flavour-card"},{default:l(()=>[i(F,{class:"text-center item-title"},{default:l(()=>[B(y(n.name),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128)):T("",!0)],64)}const Fe=R(oe,[["render",ae],["__scopeId","data-v-0cbb60a1"]]),le=L({name:"OrderSummary",data(){return{localEditingNote:this.editingNote?this.editingNote.split(", ").filter(Boolean):[]}},computed:{displayNote(){return this.localEditingNote.join(", ")}},watch:{modifyNote(e){this.localEditingNote=e}},props:{selectedItems:{type:Array,required:!0},totalBill:{type:Number,required:!0},editingItem:{type:Object,default:null},editingNote:{type:String},popularNotes:{type:Array,default:()=>[]},filteredNotes:{type:Array,default:()=>[]}},emits:["update-note","increase-quantity","decrease-quantity","start-editing","save-editing","cancel-editing"],methods:{updateNote(e){this.$emit("update-note",e.join(", "))},increaseQuantity(e){this.$emit("increase-quantity",e)},decreaseQuantity(e){this.$emit("decrease-quantity",e)},startEditing(e){this.$emit("start-editing",e)},saveEditingItem(){this.$emit("save-editing",this.displayNote)},cancelEditingItem(){this.$emit("cancel-editing")}}});const re=e=>(Z("data-v-b55a16b9"),e=e(),W(),e),se=re(()=>b("strong",null,"Order Summary",-1)),ie={class:"order-list"},ue={style:{margin:"2px"}},ce={style:{margin:"2px"}},de={key:0},pe={key:1},_e={class:"summary-section"};function ve(e,p,r,N,P,q){const F=_("v-card-title"),k=_("v-divider"),C=_("v-col"),u=_("v-btn"),n=_("v-row"),o=_("v-icon"),c=_("v-card-text"),d=_("v-card-subtitle"),f=_("v-combobox"),$=_("v-card-actions"),m=_("v-list-item"),x=_("v-list");return v(),w(D,null,[i(F,{class:"order-title"},{default:l(()=>[se]),_:1}),i(k,{thickness:"3px",color:"#5c9ead"}),b("div",ie,[i(x,{style:{height:"340px","overflow-y":"auto"},class:"flex-grow-1 overflow-auto"},{default:l(()=>[(v(!0),w(D,null,M(e.selectedItems,t=>(v(),O(m,{key:t.uid},{default:l(()=>{var g;return[i(n,{class:"ma-1"},{default:l(()=>[i(C,{cols:"5"},{default:l(()=>[b("strong",null,y(t.name),1)]),_:2},1024),i(C,{cols:"4"},{default:l(()=>[i(u,{onClick:K(E=>e.decreaseQuantity(t.uid),["stop"]),class:"small-button",icon:"mdi-minus"},null,8,["onClick"]),b("strong",ue,y(t.quantity),1),i(u,{style:{padding:"0"},onClick:E=>e.increaseQuantity(t),class:"small-button",icon:"mdi-plus"},null,8,["onClick"])]),_:2},1024),i(C,{cols:"3",class:"text-right"},{default:l(()=>[b("strong",ce,"$"+y(t.price),1),e.editingItem!==t?(v(),O(u,{key:0,onClick:K(E=>e.startEditing(t.uid),["stop"]),class:"small-button",icon:"mdi-pencil",variant:"text"},null,8,["onClick"])):T("",!0)]),_:2},1024)]),_:2},1024),t.selectedProtein||t.selectedFlavour||t.note||((g=e.editingItem)==null?void 0:g.uid)===t.uid?(v(),O(n,{key:0,class:"ma-1"},{default:l(()=>[i(C,{cols:"12"},{default:l(()=>{var E,s,a,h;return[t.selectedProtein||((E=e.editingItem)==null?void 0:E.uid)===t.uid?(v(),O(c,{key:0,style:{"min-height":"0"},class:"d-flex flex-no-wrap justify-space-between"},{default:l(()=>{var S,Q,j,A,U,J,G,H;return[t.selectedProtein?(v(),w("p",de,[i(o,null,{default:l(()=>[B("mdi-food")]),_:1}),B(" "+y(((S=e.editingItem)==null?void 0:S.uid)===t.uid?(j=(Q=e.editingItem)==null?void 0:Q.selectedProtein)==null?void 0:j.name:(A=t==null?void 0:t.selectedProtein)==null?void 0:A.name),1)])):T("",!0),t.selectedProtein?(v(),w("p",pe," $"+y(((U=e.editingItem)==null?void 0:U.uid)===t.uid?(G=(J=e.editingItem)==null?void 0:J.selectedProtein)==null?void 0:G.price:(H=t==null?void 0:t.selectedProtein)==null?void 0:H.price),1)):T("",!0)]}),_:2},1024)):T("",!0),t.selectedFlavour||((s=e.editingItem)==null?void 0:s.uid)===t.uid?(v(),O(c,{key:1},{default:l(()=>{var S,Q,j,A;return[t.selectedFlavour?(v(),O(o,{key:0},{default:l(()=>[B("mdi-flask-outline")]),_:1})):T("",!0),B(" "+y(((S=e.editingItem)==null?void 0:S.uid)===t.uid?(j=(Q=e.editingItem)==null?void 0:Q.selectedFlavour)==null?void 0:j.name:(A=t==null?void 0:t.selectedFlavour)==null?void 0:A.name),1)]}),_:2},1024)):T("",!0),t.note||((a=e.editingItem)==null?void 0:a.uid)===t.uid?(v(),O(d,{key:2},{default:l(()=>{var S;return[t.note?(v(),O(o,{key:0},{default:l(()=>[B("mdi-note-outline")]),_:1})):T("",!0),B(" "+y(((S=e.editingItem)==null?void 0:S.uid)===t.uid?e.displayNote:t==null?void 0:t.note),1)]}),_:2},1024)):T("",!0),((h=e.editingItem)==null?void 0:h.uid)===t.uid?(v(),O($,{key:3},{default:l(()=>[i(f,{modelValue:e.localEditingNote,"onUpdate:modelValue":p[0]||(p[0]=S=>e.localEditingNote=S),items:e.filteredNotes,onInput:e.updateNote,label:"Note",multiple:"",chips:"",clearable:"",density:"compact"},null,8,["modelValue","items","onInput"]),i(u,{onClick:e.saveEditingItem,size:"small",icon:"mdi-check",outlined:""},null,8,["onClick"]),i(u,{onClick:e.cancelEditingItem,size:"small",icon:"mdi-close",outlined:""},null,8,["onClick"])]),_:1})):T("",!0)]}),_:2},1024)]),_:2},1024)):T("",!0),i(k)]}),_:2},1024))),128))]),_:1})]),b("div",_e,[i(c,{class:"d-flex flex-no-wrap justify-space-between total"},{default:l(()=>[B(" Total price includes GST: "),b("strong",null,"$"+y(e.totalBill.toFixed(2)),1)]),_:1})])],64)}const Ne=R(le,[["render",ve],["__scopeId","data-v-b55a16b9"]]),fe=L({name:"SavedOrders",props:{orders:{type:Array,required:!0}}}),me=b("h2",null,"Saved Orders",-1),ge=b("br",null,null,-1),ye=b("br",null,null,-1),$e=b("hr",null,null,-1);function he(e,p,r,N,P,q){const F=_("v-spacer"),k=_("v-expansion-panel-title"),C=_("v-expansion-panel-text"),u=_("v-expansion-panel"),n=_("v-expansion-panels");return v(),w("div",null,[me,ge,(v(!0),w(D,null,M(e.orders,o=>(v(),w("div",{key:o.id},[i(n,null,{default:l(()=>[i(u,null,{default:l(()=>[i(k,null,{default:l(()=>[b("h3",null,"Order ID: "+y(o.id),1),i(F),b("p",null,y(o.timestamp),1),i(F),b("p",null,"Total: $"+y(o.total),1)]),_:2},1024),i(C,null,{default:l(()=>[(v(!0),w(D,null,M(o.items,c=>(v(),w("div",{key:c.name},[b("strong",null,"Name: "+y(c.name),1),b("p",null,"Quantity: "+y(c.quantity),1),b("p",null,"Protein: "+y(c.protein),1),b("p",null,"Flavour: "+y(c.flavour),1),b("p",null,"Note: "+y(c.note),1),ye]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024),$e]))),128))])}const xe=R(fe,[["render",he]]);function Pe(e,p,r){const N=V(""),P=V(!1),q=z(()=>e.value.find(u=>u.name===N.value)),F=z(()=>{var u;return((u=q.value)==null?void 0:u.color)||"#FFFFFF"});return{selectedCategory:q,selectedCategoryColor:F,selectCategory:u=>{N.value=u.name,P.value=!0},goBack:()=>{r.value?(r.value=!1,p.value=null):(P.value=!1,N.value="")},isCategorySelected:P,selectedCategoryName:N}}function X(e,p,r,N){return{generateRandomId:()=>Math.floor(Math.random()*Date.now()),isSameItem:(n,o)=>{var c,d,f,$;return console.log("Comparing items:",n,o),!(!n||!o||n.id!==o.id||((c=n.selectedProtein)==null?void 0:c.name)!==((d=o.selectedProtein)==null?void 0:d.name)||((f=n.selectedFlavour)==null?void 0:f.name)!==(($=o.selectedFlavour)==null?void 0:$.name)||n.note!==o.note)},getCategoryItem:n=>{const c=e.value.reduce((d,f)=>[...d,...f.items],[]).find(d=>d.id===n)||null;return console.log("Found item:",c),c},updateTotalBill:()=>{N.value=p.value.reduce((n,o)=>{const c=e.value.reduce((d,f)=>f.items.find(m=>m.id===o.id)||d,null);return c&&(n+=c.price*o.quantity,o.selectedProtein&&(n+=o.selectedProtein.price*o.quantity)),n},0)},getCategoryname:(n,o)=>{const c=e.value.reduce(($,m)=>{const x=m.items.find(t=>t.id===n);return x||$},null);if(!c)return"";let d="";const f=p.value.find($=>$.uid===o);if(f){const $=f.selectedProtein,m=f.selectedFlavour;d=`${c.name}`,$&&(d+=` - ${$.name}`),m&&(d+=` - ${m.name}`)}return d},getCategoryItemPrice:n=>{let o=0;const c=e.value.reduce((f,$)=>{const m=$.items.find(x=>x.id===n);return m||f},null);if(!c)return o;const d=p.value.find(f=>f.id===n);return d&&(o+=c.price*d.quantity,d.selectedProtein&&(o+=d.selectedProtein.price*d.quantity),d.selectedFlavour&&(o+=d.selectedFlavour.price*d.quantity)),r.value=o,o}}}function Se(e,p,r,N,P,q,F,k,C){const u=V(!1),n=V(""),o=X(e,p,q,F),c=z(()=>n.value===""?k.value:k.value.filter(s=>s.includes(n.value))),d=s=>{console.log("Increasing quantity for:",s);const a=p.value.find(h=>o.isSameItem(h,s));if(console.log("Matching existing item:",a),a)a.quantity++,console.log("no Matching existing item:");else{const h={uid:o.generateRandomId(),id:s.id,name:s.name,quantity:1,price:s.price,selectedProtein:s.selectedProtein||void 0,selectedFlavour:s.selectedFlavour||void 0,note:s.note||""};p.value.push(h),console.log("new added item:",h)}o.updateTotalBill(),!s.selectedProtein&&!s.selectedFlavour&&C()};return{increaseQuantity:d,decreaseQuantity:s=>{const a=p.value.find(h=>h.uid===s);a&&a.quantity>1?a.quantity--:p.value=p.value.filter(h=>h.uid!==s),o.updateTotalBill()},selectProtein:s=>{if(r.value){r.value.selectedProtein=s;const a=p.value.find(h=>r.value&&o.isSameItem(h,r.value));a&&(a.selectedProtein=s),!u.value&&!r.value.selectedFlavour&&d(r.value)}},selectFlavour:s=>{if(r.value){r.value.selectedFlavour=s;const a=p.value.find(h=>r.value&&o.isSameItem(h,r.value));a&&(a.selectedFlavour=s),!u.value&&!r.value.selectedProtein&&d({...r.value})}},startEditing:s=>{u.value=!0;const a=p.value.find(h=>h.uid===s);if(a){r.value={...a};const h=e.value.reduce((S,Q)=>{const j=Q.items.find(A=>A.id===a.id);return j||S},null);P.value=h,N.value=!0}},saveEditingItem:s=>{const a=p.value.find(h=>{var S;return h.uid===((S=r.value)==null?void 0:S.uid)});a&&r.value&&(a.selectedProtein=r.value.selectedProtein,a.selectedFlavour=r.value.selectedFlavour,a.note=s),r.value=null,n.value="",u.value=!1,o.updateTotalBill(),N.value=!1,P.value=null},cancelEditingItem:()=>{r.value=null,n.value="",N.value=!1,P.value=null},updateEditingNote:s=>{n.value=s},editingMode:u,editingNote:n,filteredNotes:c}}function we(e,p,r,N,P,q){const F=V(!1),k=V([]),C=X(e,p,N,r),u=()=>{var E,s;let f=(E=q.value)==null?void 0:E.businessName,$=(s=q.value)==null?void 0:s.ABN,m=`
<div class="receipt">
    <p>Supplier: ${f}</p>
    <p>ABN: ${$}</p>
    <p>Date: ${new Date().toLocaleDateString()}</p>
    <br/>
    <table>
        `;p.value.forEach(a=>{m+=`
        <tr>
            <td><strong>${a.name}</strong></td>
            <td>${a.quantity}</td>
            <td>$${C.getCategoryItemPrice(a.id).toFixed(2)}</td>
        </tr>`,a.selectedProtein&&(m+=`<tr><td colspan="2">- ${a.selectedProtein.name}</td>
        
        <td>$${a.selectedProtein.price}</td>
        </tr>`),a.selectedFlavour&&(m+=`<tr><td colspan="3">- ${a.selectedFlavour.name}</td></tr>`),a.note&&(m+=`<tr><td colspan="3">-Note: ${a.note}</td></tr> `),m+='<tr><td colspan="3"> </td></tr>'});let x=r.value,t=r.value/11;m+=`
    </table>
    <br/>
    <p><strong>Total: $${x.toFixed(2)}</strong></p>
    <p><strong>GST: $${t.toFixed(2)}</strong></p>
</div>`;const g=window.open("","_blank");g==null||g.document.write(`
    <head>
        <style>
            .receipt {
                font-family: 'Courier New', monospace;
                font-size: 10px;
                width: 80mm;
            }
            table {
                width: 100%;
                border: none;
            }
            th, td {
                padding: 2px 5px;
                text-align: left;
                font-size: 10px;
            }
            th {
                text-align: center;
            }
        </style>
    </head>
    <body>${m}</body>
`),g==null||g.document.close(),g==null||g.print()},n=()=>{if(p.value.length>0){const f=p.value.map(t=>{var g,E;return{name:t.name,quantity:t.quantity,protein:(g=t.selectedProtein)==null?void 0:g.name,flavour:(E=t.selectedFlavour)==null?void 0:E.name,note:t.note}}),$={id:C.generateRandomId(),timestamp:new Date().toLocaleTimeString()+" "+new Date().toLocaleDateString(),items:f,total:r.value};let m=localStorage.getItem("orders"),x=m?JSON.parse(m):[];x.push($),localStorage.setItem("orders",JSON.stringify(x)),P.value=!0,setTimeout(()=>{P.value=!1},3e3),console.log("Order saved. Total orders: ",x.length)}else console.log("No items in the order to save.")},o=()=>{F.value=!0,c()},c=()=>{let f=localStorage.getItem("orders");k.value=f?JSON.parse(f):[]};return{showDialog:F,savedOrders:k,printOrder:u,saveOrder:n,viewOrders:o,loadOrders:c,downloadOrders:()=>{let f=k.value.map(t=>`Order ID: ${t.id}
Timestamp: ${t.timestamp}
Total: ${t.total}
Items: ${t.items.map(g=>`Name: ${g.name}, Quantity: ${g.quantity}, Protein: ${g.protein}, Flavour: ${g.flavour}, Note: ${g.note}`).join(`
`)}

`).join(`
`),$=new Blob([f],{type:"text/plain"}),m=URL.createObjectURL($),x=document.createElement("a");x.download="orders.txt",x.href=m,x.click()}}}export{xe as _,ke as a,Ce as b,Fe as c,Ne as d,Pe as e,Se as f,we as g,X as u};
