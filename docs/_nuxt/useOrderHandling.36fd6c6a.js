import{d as L,_ as z,f as v,k as _,l as w,C as R,F as D,A as O,s as l,q as i,D as Y,m as b,t as $,v as B,B as T,E as K,x as Z,y as W,r as V,c as M}from"./entry.b866aff9.js";const I=L({name:"CategorySelection",props:{categories:{type:Array,required:!0}},emits:["category-selected"],methods:{selectCategory(e){this.$emit("category-selected",e)}}});function ee(e,d,r,N,x,q){const C=v("v-card-title"),k=v("v-card"),F=v("v-col");return _(!0),w(D,null,R(e.categories,(u,n)=>(_(),O(F,{key:n,cols:"12",sm:"6",md:"4",lg:"3"},{default:l(()=>[i(k,{style:Y(`border-color: ${u.color};`),class:"ma-2 pa-3 category-card",onClick:o=>e.selectCategory(u)},{default:l(()=>[i(C,{class:"text-center text-responsive item-title"},{default:l(()=>[b("strong",null,$(u.name),1)]),_:2},1024)]),_:2},1032,["style","onClick"])]),_:2},1024))),128)}const ke=z(I,[["render",ee],["__scopeId","data-v-0c3f5cd9"]]),te=L({name:"ItemSelection",props:{selectedCategory:{type:Object,required:!0}},emits:["item-selected"],methods:{select(e){this.$emit("item-selected",e)}}});function ne(e,d,r,N,x,q){const C=v("v-card-text"),k=v("v-card-subtitle"),F=v("v-card"),u=v("v-col");return _(!0),w(D,null,R(e.selectedCategory.items,n=>(_(),O(u,{key:n.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:l(()=>[i(F,{class:"pa-1 item-card",onClick:o=>e.select(n)},{default:l(()=>[i(C,{class:"text-center text-responsive item-title flex-grow-1"},{default:l(()=>[b("strong",null,$(n.name),1)]),_:2},1024),i(k,{class:"price-info text-center"},{default:l(()=>[B(" $"+$(n.price),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128)}const Fe=z(te,[["render",ne],["__scopeId","data-v-3f72d7bf"]]),oe=L({name:"DetailsSelection",props:{selectedFoodItem:{type:Object,required:!0}},emits:["protein-selected","flavour-selected"],methods:{selectProtein(e){this.$emit("protein-selected",e)},selectFlavour(e){this.$emit("flavour-selected",e)}}});function ae(e,d,r,N,x,q){const C=v("v-card-title"),k=v("v-card-text"),F=v("v-card"),u=v("v-col");return _(),w(D,null,[e.selectedFoodItem.proteinChoices?(_(!0),w(D,{key:0},R(e.selectedFoodItem.proteinChoices,n=>(_(),O(u,{cols:"12",sm:"6",md:"4",lg:"3",key:n.name},{default:l(()=>[i(F,{onClick:o=>e.selectProtein(n),class:"ma-2 pa-3 item-card protein-card"},{default:l(()=>[i(C,{class:"text-center item-title flex-grow-1"},{default:l(()=>[B($(n.name),1)]),_:2},1024),i(k,{class:"flex-grow-1"}),i(k,{class:"price-info text-center"},{default:l(()=>[B(" $"+$(n.price),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128)):T("",!0),e.selectedFoodItem.flavourChoices?(_(!0),w(D,{key:1},R(e.selectedFoodItem.flavourChoices,n=>(_(),O(u,{cols:"12",sm:"6",md:"4",lg:"3",key:n.name},{default:l(()=>[i(F,{onClick:o=>e.selectFlavour(n),class:"ma-2 pa-3 item-card flavour-card"},{default:l(()=>[i(C,{class:"text-center item-title"},{default:l(()=>[B($(n.name),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128)):T("",!0)],64)}const Ce=z(oe,[["render",ae],["__scopeId","data-v-0cbb60a1"]]),le=L({name:"OrderSummary",data(){return{localEditingNote:this.editingNote?this.editingNote.split(", ").filter(Boolean):[]}},computed:{displayNote(){return this.localEditingNote.join(", ")}},watch:{modifyNote(e){this.localEditingNote=e}},props:{selectedItems:{type:Array,required:!0},totalBill:{type:Number,required:!0},editingItem:{type:Object,default:null},editingNote:{type:String},popularNotes:{type:Array,default:()=>[]},filteredNotes:{type:Array,default:()=>[]}},emits:["update-note","increase-quantity","decrease-quantity","start-editing","save-editing","cancel-editing"],methods:{updateNote(e){this.$emit("update-note",e.join(", "))},increaseQuantity(e){this.$emit("increase-quantity",e)},decreaseQuantity(e){this.$emit("decrease-quantity",e)},startEditing(e){this.$emit("start-editing",e)},saveEditingItem(){this.$emit("save-editing",this.displayNote)},cancelEditingItem(){this.$emit("cancel-editing")}}});const re=e=>(Z("data-v-b55a16b9"),e=e(),W(),e),se=re(()=>b("strong",null,"Order Summary",-1)),ie={class:"order-list"},ue={style:{margin:"2px"}},ce={style:{margin:"2px"}},de={key:0},pe={key:1},ve={class:"summary-section"};function _e(e,d,r,N,x,q){const C=v("v-card-title"),k=v("v-divider"),F=v("v-col"),u=v("v-btn"),n=v("v-row"),o=v("v-icon"),c=v("v-card-text"),p=v("v-card-subtitle"),f=v("v-combobox"),h=v("v-card-actions"),m=v("v-list-item"),P=v("v-list");return _(),w(D,null,[i(C,{class:"order-title"},{default:l(()=>[se]),_:1}),i(k,{thickness:"3px",color:"#5c9ead"}),b("div",ie,[i(P,{style:{height:"340px","overflow-y":"auto"},class:"flex-grow-1 overflow-auto"},{default:l(()=>[(_(!0),w(D,null,R(e.selectedItems,t=>(_(),O(m,{key:t.uid},{default:l(()=>{var y;return[i(n,{class:"ma-1"},{default:l(()=>[i(F,{cols:"5"},{default:l(()=>[b("strong",null,$(t.name),1)]),_:2},1024),i(F,{cols:"4"},{default:l(()=>[i(u,{onClick:K(E=>e.decreaseQuantity(t.uid),["stop"]),class:"small-button",icon:"mdi-minus"},null,8,["onClick"]),b("strong",ue,$(t.quantity),1),i(u,{style:{padding:"0"},onClick:E=>e.increaseQuantity(t),class:"small-button",icon:"mdi-plus"},null,8,["onClick"])]),_:2},1024),i(F,{cols:"3",class:"text-right"},{default:l(()=>[b("strong",ce,"$"+$(t.price),1),e.editingItem!==t?(_(),O(u,{key:0,onClick:K(E=>e.startEditing(t.uid),["stop"]),class:"small-button",icon:"mdi-pencil",variant:"text"},null,8,["onClick"])):T("",!0)]),_:2},1024)]),_:2},1024),t.selectedProtein||t.selectedFlavour||t.note||((y=e.editingItem)==null?void 0:y.uid)===t.uid?(_(),O(n,{key:0,class:"ma-1"},{default:l(()=>[i(F,{cols:"12"},{default:l(()=>{var E,s,a,g;return[t.selectedProtein||((E=e.editingItem)==null?void 0:E.uid)===t.uid?(_(),O(c,{key:0,style:{"min-height":"0"},class:"d-flex flex-no-wrap justify-space-between"},{default:l(()=>{var S,Q,j,A,U,J,G,H;return[t.selectedProtein?(_(),w("p",de,[i(o,null,{default:l(()=>[B("mdi-food")]),_:1}),B(" "+$(((S=e.editingItem)==null?void 0:S.uid)===t.uid?(j=(Q=e.editingItem)==null?void 0:Q.selectedProtein)==null?void 0:j.name:(A=t==null?void 0:t.selectedProtein)==null?void 0:A.name),1)])):T("",!0),t.selectedProtein?(_(),w("p",pe," $"+$(((U=e.editingItem)==null?void 0:U.uid)===t.uid?(G=(J=e.editingItem)==null?void 0:J.selectedProtein)==null?void 0:G.price:(H=t==null?void 0:t.selectedProtein)==null?void 0:H.price),1)):T("",!0)]}),_:2},1024)):T("",!0),t.selectedFlavour||((s=e.editingItem)==null?void 0:s.uid)===t.uid?(_(),O(c,{key:1},{default:l(()=>{var S,Q,j,A;return[t.selectedFlavour?(_(),O(o,{key:0},{default:l(()=>[B("mdi-flask-outline")]),_:1})):T("",!0),B(" "+$(((S=e.editingItem)==null?void 0:S.uid)===t.uid?(j=(Q=e.editingItem)==null?void 0:Q.selectedFlavour)==null?void 0:j.name:(A=t==null?void 0:t.selectedFlavour)==null?void 0:A.name),1)]}),_:2},1024)):T("",!0),t.note||((a=e.editingItem)==null?void 0:a.uid)===t.uid?(_(),O(p,{key:2},{default:l(()=>{var S;return[t.note?(_(),O(o,{key:0},{default:l(()=>[B("mdi-note-outline")]),_:1})):T("",!0),B(" "+$(((S=e.editingItem)==null?void 0:S.uid)===t.uid?e.displayNote:t==null?void 0:t.note),1)]}),_:2},1024)):T("",!0),((g=e.editingItem)==null?void 0:g.uid)===t.uid?(_(),O(h,{key:3},{default:l(()=>[i(f,{modelValue:e.localEditingNote,"onUpdate:modelValue":d[0]||(d[0]=S=>e.localEditingNote=S),items:e.filteredNotes,onInput:e.updateNote,label:"Note",multiple:"",chips:"",clearable:"",density:"compact"},null,8,["modelValue","items","onInput"]),i(u,{onClick:e.saveEditingItem,size:"small",icon:"mdi-check",outlined:""},null,8,["onClick"]),i(u,{onClick:e.cancelEditingItem,size:"small",icon:"mdi-close",outlined:""},null,8,["onClick"])]),_:1})):T("",!0)]}),_:2},1024)]),_:2},1024)):T("",!0),i(k)]}),_:2},1024))),128))]),_:1})]),b("div",ve,[i(c,{class:"d-flex flex-no-wrap justify-space-between total"},{default:l(()=>[B(" Total price includes GST: "),b("strong",null,"$"+$(e.totalBill.toFixed(2)),1)]),_:1})])],64)}const Ne=z(le,[["render",_e],["__scopeId","data-v-b55a16b9"]]),fe=L({name:"SavedOrders",props:{orders:{type:Array,required:!0}}}),me=b("h2",null,"Saved Orders",-1),ge=b("br",null,null,-1),ye=b("br",null,null,-1),$e=b("hr",null,null,-1);function he(e,d,r,N,x,q){const C=v("v-spacer"),k=v("v-expansion-panel-title"),F=v("v-expansion-panel-text"),u=v("v-expansion-panel"),n=v("v-expansion-panels");return _(),w("div",null,[me,ge,(_(!0),w(D,null,R(e.orders,o=>(_(),w("div",{key:o.id},[i(n,null,{default:l(()=>[i(u,null,{default:l(()=>[i(k,null,{default:l(()=>[b("h3",null,"Order ID: "+$(o.id),1),i(C),b("p",null,$(o.timestamp),1),i(C),b("p",null,"Total: $"+$(o.total),1)]),_:2},1024),i(F,null,{default:l(()=>[(_(!0),w(D,null,R(o.items,c=>(_(),w("div",{key:c.name},[b("strong",null,"Name: "+$(c.name),1),b("p",null,"Quantity: "+$(c.quantity),1),b("p",null,"Protein: "+$(c.protein),1),b("p",null,"Flavour: "+$(c.flavour),1),b("p",null,"Note: "+$(c.note),1),ye]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024),$e]))),128))])}const Pe=z(fe,[["render",he]]);function xe(e,d,r){const N=V(""),x=V(!1),q=M(()=>e.value.find(u=>u.name===N.value)),C=M(()=>{var u;return((u=q.value)==null?void 0:u.color)||"#FFFFFF"});return{selectedCategory:q,selectedCategoryColor:C,selectCategory:u=>{N.value=u.name,x.value=!0},goBack:()=>{r.value?(r.value=!1,d.value=null):(x.value=!1,N.value="")},isCategorySelected:x,selectedCategoryName:N}}function X(e,d,r,N){return{generateRandomId:()=>Math.floor(Math.random()*Date.now()),isSameItem:(n,o)=>{var c,p,f,h;return console.log("Comparing items:",n,o),!(!n||!o||n.id!==o.id||((c=n.selectedProtein)==null?void 0:c.name)!==((p=o.selectedProtein)==null?void 0:p.name)||((f=n.selectedFlavour)==null?void 0:f.name)!==((h=o.selectedFlavour)==null?void 0:h.name)||n.note!==o.note)},getCategoryItem:n=>{const c=e.value.reduce((p,f)=>[...p,...f.items],[]).find(p=>p.id===n)||null;return console.log("Found item:",c),c},updateTotalBill:()=>{N.value=d.value.reduce((n,o)=>{const c=e.value.reduce((p,f)=>f.items.find(m=>m.id===o.id)||p,null);return c&&(n+=c.price*o.quantity,o.selectedProtein&&(n+=o.selectedProtein.price*o.quantity)),n},0)},getCategoryname:(n,o)=>{const c=e.value.reduce((h,m)=>{const P=m.items.find(t=>t.id===n);return P||h},null);if(!c)return"";let p="";const f=d.value.find(h=>h.uid===o);if(f){const h=f.selectedProtein,m=f.selectedFlavour;p=`${c.name}`,h&&(p+=` - ${h.name}`),m&&(p+=` - ${m.name}`)}return p},getCategoryItemPrice:n=>{let o=0;const c=e.value.reduce((f,h)=>{const m=h.items.find(P=>P.id===n);return m||f},null);if(!c)return o;const p=d.value.find(f=>f.id===n);return p&&(o+=c.price*p.quantity,p.selectedProtein&&(o+=p.selectedProtein.price*p.quantity),p.selectedFlavour&&(o+=p.selectedFlavour.price*p.quantity)),r.value=o,o}}}function Se(e,d,r,N,x,q,C,k,F){const u=V(!1),n=V(""),o=X(e,d,q,C),c=M(()=>n.value===""?k.value:k.value.filter(s=>s.includes(n.value))),p=s=>{console.log("Increasing quantity for:",s);const a=d.value.find(g=>o.isSameItem(g,s));if(a){const g={uid:o.generateRandomId(),id:a.id,name:a.name,quantity:1,price:a.price,selectedProtein:a.selectedProtein||void 0,selectedFlavour:a.selectedFlavour||void 0,note:a.note||""};d.value.push(g)}else{const g={uid:o.generateRandomId(),id:s.id,name:s.name,quantity:1,price:s.price,selectedProtein:s.selectedProtein||void 0,selectedFlavour:s.selectedFlavour||void 0,note:s.note||""};d.value.push(g),console.log("new added item:",g)}o.updateTotalBill(),!s.selectedProtein&&!s.selectedFlavour&&F()};return{increaseQuantity:p,decreaseQuantity:s=>{const a=d.value.find(g=>g.uid===s);a&&a.quantity>1?a.quantity--:d.value=d.value.filter(g=>g.uid!==s),o.updateTotalBill()},selectProtein:s=>{if(r.value){r.value.selectedProtein=s;const a=d.value.find(g=>r.value&&o.isSameItem(g,r.value));a&&(a.selectedProtein=s),!u.value&&!r.value.selectedFlavour&&p(r.value)}},selectFlavour:s=>{if(r.value){r.value.selectedFlavour=s;const a=d.value.find(g=>r.value&&o.isSameItem(g,r.value));a&&(a.selectedFlavour=s),!u.value&&!r.value.selectedProtein&&p({...r.value})}},startEditing:s=>{u.value=!0;const a=d.value.find(g=>g.uid===s);if(a){r.value={...a};const g=e.value.reduce((S,Q)=>{const j=Q.items.find(A=>A.id===a.id);return j||S},null);x.value=g,N.value=!0}},saveEditingItem:s=>{const a=d.value.find(g=>{var S;return g.uid===((S=r.value)==null?void 0:S.uid)});a&&r.value&&(a.selectedProtein=r.value.selectedProtein,a.selectedFlavour=r.value.selectedFlavour,a.note=s),r.value=null,n.value="",u.value=!1,o.updateTotalBill(),N.value=!1,x.value=null},cancelEditingItem:()=>{r.value=null,n.value="",N.value=!1,x.value=null},updateEditingNote:s=>{n.value=s},editingMode:u,editingNote:n,filteredNotes:c}}function we(e,d,r,N,x,q){const C=V(!1),k=V([]),F=X(e,d,N,r),u=()=>{var E,s;let f=(E=q.value)==null?void 0:E.businessName,h=(s=q.value)==null?void 0:s.ABN,m=`
<div class="receipt">
    <p><strong>Supplier: ${f}</strong></p>
    <p>ABN: ${h}</p>
    <p>Date: ${new Date().toLocaleDateString()}</p>
    <br/>
    <p>****</p>
    <table>
        `;d.value.forEach(a=>{m+=`
        <tr>
            <td><strong>${a.name}</strong></td>
            <td>${a.quantity}</td>
            <td>$${F.getCategoryItemPrice(a.id).toFixed(2)}</td>
        </tr>`,a.selectedProtein&&(m+=`<tr><td colspan="2">- ${a.selectedProtein.name}</td>
        
        <td>$${a.selectedProtein.price}</td>
        </tr>`),a.selectedFlavour&&(m+=`<tr><td colspan="3">- ${a.selectedFlavour.name}</td></tr>`),a.note&&(m+=`<tr><td colspan="3">-Note: ${a.note}</td></tr> `),m+='<tr><td colspan="3"> </td></tr><tr><td colspan="3"> </td></tr>'});let P=r.value,t=r.value/11;m+=`
    </table>
    <br/>
    <p><strong>Total: $${P.toFixed(2)}</strong></p>
    <p><strong>GST: $${t.toFixed(2)}</strong></p>
</div>`;const y=window.open("","_blank");y==null||y.document.write(`
    <head>
        <style>
            .receipt {
                font-family: 'Courier New', monospace;
                font-size: 18px;
                width: 80mm;
            }
            table {
                width: 100%;
                border: none;
            }
            th, td {
                padding: 2px 5px;
                text-align: left;
                font-size: 18px;
            }
            th {
                text-align: center;
            }
        </style>
    </head>
    <body>${m}</body>
`),y==null||y.document.close(),y==null||y.print()},n=()=>{if(d.value.length>0){const f=d.value.map(t=>{var y,E;return{name:t.name,quantity:t.quantity,protein:(y=t.selectedProtein)==null?void 0:y.name,flavour:(E=t.selectedFlavour)==null?void 0:E.name,note:t.note}}),h={id:F.generateRandomId(),timestamp:new Date().toLocaleTimeString()+" "+new Date().toLocaleDateString(),items:f,total:r.value};let m=localStorage.getItem("orders"),P=m?JSON.parse(m):[];P.push(h),localStorage.setItem("orders",JSON.stringify(P)),x.value=!0,setTimeout(()=>{x.value=!1},3e3),console.log("Order saved. Total orders: ",P.length)}else console.log("No items in the order to save.")},o=()=>{C.value=!0,c()},c=()=>{let f=localStorage.getItem("orders");k.value=f?JSON.parse(f):[]};return{showDialog:C,savedOrders:k,printOrder:u,saveOrder:n,viewOrders:o,loadOrders:c,downloadOrders:()=>{let f=k.value.map(t=>`Order ID: ${t.id}
Timestamp: ${t.timestamp}
Total: ${t.total}
Items: ${t.items.map(y=>`Name: ${y.name}, Quantity: ${y.quantity}, Protein: ${y.protein}, Flavour: ${y.flavour}, Note: ${y.note}`).join(`
`)}

`).join(`
`),h=new Blob([f],{type:"text/plain"}),m=URL.createObjectURL(h),P=document.createElement("a");P.download="orders.txt",P.href=m,P.click()}}}export{Pe as _,ke as a,Fe as b,Ce as c,Ne as d,xe as e,Se as f,we as g,X as u};
